define(["require","exports","app/helper/urlhelper","app/gen/service/space","asset/single/single-images","app/objects/simplepanel/simplepanel","app/ui/prompt/delegate/openingpromptdelegate","app/objects/centralwindow/centralwindow","i18n!../../../locales:opening_prompt","i18next"],function(e,t,n,i,o,a,s,p){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.openingprompt=void 0,t=t.openingprompt={},r=o.singleimages.DIM_PICKED,t.OpeningPromptModule=class{get sandbox(){if(this._sandbox)return this._sandbox;throw new Error("Sandbox is not set")}set sandbox(e){this._sandbox=e}constructor(e){this.sandbox=e}activate(){this.showPromptIfNeeded()}deactivate(){}showPromptIfNeeded(){i.space.getOpeningPrompt(this.sandbox,e=>this.openPanelIfNeeded(e),()=>{this.sandbox.logger.e("error getting opening prompt")})}openPanelIfNeeded(e){e&&Object.keys(e).length&&(this.delegate=new s.opd.OpeningPromptDelegate(this.sandbox,e),e.executeActionRightAway?this.delegate.accept():(e={sandbox:this.sandbox,title:e.title,imageUrl:this.getImageUrl(e.imageName),imageHeight:e.imageHeight||void 0,content:e.content,noDisplayOnBack:!0,button:this.getButtonText(e.actionButton),onButtonClicked:()=>this.delegate.accept(),onHidden:()=>this.delegate.ignore()},p.centralWindow.get(this.sandbox).isShown()||a.simplePanel.displaySimplePanel(e)))}getButtonText(e){return e&&e.trim().length?e:null}getImageUrl(e){return e?n.urlhelper.getOpeningPromptAssetUrl(e):r}}});